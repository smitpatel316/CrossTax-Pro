{"ast":null,"code":"import _objectSpread from\"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const TaxContext=/*#__PURE__*/createContext(null);const STEPS=['dashboard','residency','income','deductions','review'];export function TaxProvider(_ref){let{children}=_ref;const[taxData,setTaxData]=useState({user:{firstName:'',lastName:'',email:''},taxYear:new Date().getFullYear()-1,residency:{us:{},ca:{}},income:{us:[],ca:[]},deductions:{us:[],ca:[]},credits:{us:[],ca:[]},documents:[],calculations:{}});const[currentStep,setCurrentStep]=useState('dashboard');const updateTaxData=updates=>{setTaxData(prev=>_objectSpread(_objectSpread({},prev),updates));};const addIncome=(country,incomeItem)=>{setTaxData(prev=>_objectSpread(_objectSpread({},prev),{},{income:_objectSpread(_objectSpread({},prev.income),{},{[country]:[...prev.income[country],_objectSpread(_objectSpread({},incomeItem),{},{id:Date.now()})]})}));};const removeIncome=(country,incomeId)=>{setTaxData(prev=>_objectSpread(_objectSpread({},prev),{},{income:_objectSpread(_objectSpread({},prev.income),{},{[country]:prev.income[country].filter(i=>i.id!==incomeId)})}));};const addDeduction=(country,deductionItem)=>{setTaxData(prev=>_objectSpread(_objectSpread({},prev),{},{deductions:_objectSpread(_objectSpread({},prev.deductions),{},{[country]:[...prev.deductions[country],_objectSpread(_objectSpread({},deductionItem),{},{id:Date.now()})]})}));};const removeDeduction=(country,deductionId)=>{setTaxData(prev=>_objectSpread(_objectSpread({},prev),{},{deductions:_objectSpread(_objectSpread({},prev.deductions),{},{[country]:prev.deductions[country].filter(d=>d.id!==deductionId)})}));};const setStep=step=>{if(STEPS.includes(step)){setCurrentStep(step);}};const nextStep=()=>{const currentIndex=STEPS.indexOf(currentStep);if(currentIndex<STEPS.length-1){setCurrentStep(STEPS[currentIndex+1]);}};const prevStep=()=>{const currentIndex=STEPS.indexOf(currentStep);if(currentIndex>0){setCurrentStep(STEPS[currentIndex-1]);}};const calculateTotals=()=>{const usIncome=taxData.income.us.reduce((sum,i)=>sum+(parseFloat(i.amount)||0),0);const caIncome=taxData.income.ca.reduce((sum,i)=>sum+(parseFloat(i.amount)||0),0);const usDeductions=taxData.deductions.us.reduce((sum,d)=>sum+(parseFloat(d.amount)||0),0);const caDeductions=taxData.deductions.ca.reduce((sum,d)=>sum+(parseFloat(d.amount)||0),0);return{usIncome,caIncome,usDeductions,caDeductions,totalUSIncome:usIncome+caIncome*1.36// Simplified conversion\n};};return/*#__PURE__*/_jsx(TaxContext.Provider,{value:{taxData,updateTaxData,addIncome,removeIncome,addDeduction,removeDeduction,currentStep,setStep,nextStep,prevStep,calculateTotals,steps:STEPS},children:children});}export function useTax(){const context=useContext(TaxContext);if(!context){throw new Error('useTax must be used within a TaxProvider');}return context;}export default TaxContext;","map":{"version":3,"names":["React","createContext","useContext","useState","jsx","_jsx","TaxContext","STEPS","TaxProvider","_ref","children","taxData","setTaxData","user","firstName","lastName","email","taxYear","Date","getFullYear","residency","us","ca","income","deductions","credits","documents","calculations","currentStep","setCurrentStep","updateTaxData","updates","prev","_objectSpread","addIncome","country","incomeItem","id","now","removeIncome","incomeId","filter","i","addDeduction","deductionItem","removeDeduction","deductionId","d","setStep","step","includes","nextStep","currentIndex","indexOf","length","prevStep","calculateTotals","usIncome","reduce","sum","parseFloat","amount","caIncome","usDeductions","caDeductions","totalUSIncome","Provider","value","steps","useTax","context","Error"],"sources":["/home/smitpatel316/projects/cross-border-tax/frontend/src/context/TaxContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\n\nconst TaxContext = createContext(null);\n\nconst STEPS = ['dashboard', 'residency', 'income', 'deductions', 'review'];\n\nexport function TaxProvider({ children }) {\n  const [taxData, setTaxData] = useState({\n    user: {\n      firstName: '',\n      lastName: '',\n      email: '',\n    },\n    taxYear: new Date().getFullYear() - 1,\n    residency: {\n      us: {},\n      ca: {},\n    },\n    income: {\n      us: [],\n      ca: [],\n    },\n    deductions: {\n      us: [],\n      ca: [],\n    },\n    credits: {\n      us: [],\n      ca: [],\n    },\n    documents: [],\n    calculations: {},\n  });\n\n  const [currentStep, setCurrentStep] = useState('dashboard');\n\n  const updateTaxData = (updates) => {\n    setTaxData(prev => ({\n      ...prev,\n      ...updates,\n    }));\n  };\n\n  const addIncome = (country, incomeItem) => {\n    setTaxData(prev => ({\n      ...prev,\n      income: {\n        ...prev.income,\n        [country]: [...prev.income[country], { ...incomeItem, id: Date.now() }],\n      },\n    }));\n  };\n\n  const removeIncome = (country, incomeId) => {\n    setTaxData(prev => ({\n      ...prev,\n      income: {\n        ...prev.income,\n        [country]: prev.income[country].filter(i => i.id !== incomeId),\n      },\n    }));\n  };\n\n  const addDeduction = (country, deductionItem) => {\n    setTaxData(prev => ({\n      ...prev,\n      deductions: {\n        ...prev.deductions,\n        [country]: [...prev.deductions[country], { ...deductionItem, id: Date.now() }],\n      },\n    }));\n  };\n\n  const removeDeduction = (country, deductionId) => {\n    setTaxData(prev => ({\n      ...prev,\n      deductions: {\n        ...prev.deductions,\n        [country]: prev.deductions[country].filter(d => d.id !== deductionId),\n      },\n    }));\n  };\n\n  const setStep = (step) => {\n    if (STEPS.includes(step)) {\n      setCurrentStep(step);\n    }\n  };\n\n  const nextStep = () => {\n    const currentIndex = STEPS.indexOf(currentStep);\n    if (currentIndex < STEPS.length - 1) {\n      setCurrentStep(STEPS[currentIndex + 1]);\n    }\n  };\n\n  const prevStep = () => {\n    const currentIndex = STEPS.indexOf(currentStep);\n    if (currentIndex > 0) {\n      setCurrentStep(STEPS[currentIndex - 1]);\n    }\n  };\n\n  const calculateTotals = () => {\n    const usIncome = taxData.income.us.reduce((sum, i) => sum + (parseFloat(i.amount) || 0), 0);\n    const caIncome = taxData.income.ca.reduce((sum, i) => sum + (parseFloat(i.amount) || 0), 0);\n    const usDeductions = taxData.deductions.us.reduce((sum, d) => sum + (parseFloat(d.amount) || 0), 0);\n    const caDeductions = taxData.deductions.ca.reduce((sum, d) => sum + (parseFloat(d.amount) || 0), 0);\n\n    return {\n      usIncome,\n      caIncome,\n      usDeductions,\n      caDeductions,\n      totalUSIncome: usIncome + (caIncome * 1.36), // Simplified conversion\n    };\n  };\n\n  return (\n    <TaxContext.Provider\n      value={{\n        taxData,\n        updateTaxData,\n        addIncome,\n        removeIncome,\n        addDeduction,\n        removeDeduction,\n        currentStep,\n        setStep,\n        nextStep,\n        prevStep,\n        calculateTotals,\n        steps: STEPS,\n      }}\n    >\n      {children}\n    </TaxContext.Provider>\n  );\n}\n\nexport function useTax() {\n  const context = useContext(TaxContext);\n  if (!context) {\n    throw new Error('useTax must be used within a TaxProvider');\n  }\n  return context;\n}\n\nexport default TaxContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}