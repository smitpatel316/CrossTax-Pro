{"ast":null,"code":"import _classPrivateMethodInitSpec from \"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _assertClassBrand from \"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";\nimport _classPrivateFieldGet from \"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _classPrivateFieldSet from \"/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nvar _client, _result, _queries, _options, _observers, _combinedResult, _lastCombine, _lastResult, _lastQueryHashes, _observerMatches, _Class_brand;\n// src/queriesObserver.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { QueryObserver } from \"./queryObserver.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { replaceEqualDeep, shallowEqualObjects } from \"./utils.js\";\nfunction difference(array1, array2) {\n  const excludeSet = new Set(array2);\n  return array1.filter(x => !excludeSet.has(x));\n}\nfunction replaceAt(array, index, value) {\n  const copy = array.slice(0);\n  copy[index] = value;\n  return copy;\n}\nvar QueriesObserver = (_client = /*#__PURE__*/new WeakMap(), _result = /*#__PURE__*/new WeakMap(), _queries = /*#__PURE__*/new WeakMap(), _options = /*#__PURE__*/new WeakMap(), _observers = /*#__PURE__*/new WeakMap(), _combinedResult = /*#__PURE__*/new WeakMap(), _lastCombine = /*#__PURE__*/new WeakMap(), _lastResult = /*#__PURE__*/new WeakMap(), _lastQueryHashes = /*#__PURE__*/new WeakMap(), _observerMatches = /*#__PURE__*/new WeakMap(), _Class_brand = /*#__PURE__*/new WeakSet(), class QueriesObserver extends Subscribable {\n  constructor(client, _queries2, _options2) {\n    super();\n    _classPrivateMethodInitSpec(this, _Class_brand);\n    _classPrivateFieldInitSpec(this, _client, void 0);\n    _classPrivateFieldInitSpec(this, _result, void 0);\n    _classPrivateFieldInitSpec(this, _queries, void 0);\n    _classPrivateFieldInitSpec(this, _options, void 0);\n    _classPrivateFieldInitSpec(this, _observers, void 0);\n    _classPrivateFieldInitSpec(this, _combinedResult, void 0);\n    _classPrivateFieldInitSpec(this, _lastCombine, void 0);\n    _classPrivateFieldInitSpec(this, _lastResult, void 0);\n    _classPrivateFieldInitSpec(this, _lastQueryHashes, void 0);\n    _classPrivateFieldInitSpec(this, _observerMatches, []);\n    _classPrivateFieldSet(_client, this, client);\n    _classPrivateFieldSet(_options, this, _options2);\n    _classPrivateFieldSet(_queries, this, []);\n    _classPrivateFieldSet(_observers, this, []);\n    _classPrivateFieldSet(_result, this, []);\n    this.setQueries(_queries2);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      _classPrivateFieldGet(_observers, this).forEach(observer => {\n        observer.subscribe(result => {\n          _assertClassBrand(_Class_brand, this, _onUpdate).call(this, observer, result);\n        });\n      });\n    }\n  }\n  onUnsubscribe() {\n    if (!this.listeners.size) {\n      this.destroy();\n    }\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */new Set();\n    _classPrivateFieldGet(_observers, this).forEach(observer => {\n      observer.destroy();\n    });\n  }\n  setQueries(queries, options) {\n    _classPrivateFieldSet(_queries, this, queries);\n    _classPrivateFieldSet(_options, this, options);\n    if (process.env.NODE_ENV !== \"production\") {\n      const queryHashes = queries.map(query => _classPrivateFieldGet(_client, this).defaultQueryOptions(query).queryHash);\n      if (new Set(queryHashes).size !== queryHashes.length) {\n        console.warn(\"[QueriesObserver]: Duplicate Queries found. This might result in unexpected behavior.\");\n      }\n    }\n    notifyManager.batch(() => {\n      const prevObservers = _classPrivateFieldGet(_observers, this);\n      const newObserverMatches = _assertClassBrand(_Class_brand, this, _findMatchingObservers).call(this, _classPrivateFieldGet(_queries, this));\n      newObserverMatches.forEach(match => match.observer.setOptions(match.defaultedQueryOptions));\n      const newObservers = newObserverMatches.map(match => match.observer);\n      const newResult = newObservers.map(observer => observer.getCurrentResult());\n      const hasLengthChange = prevObservers.length !== newObservers.length;\n      const hasIndexChange = newObservers.some((observer, index) => observer !== prevObservers[index]);\n      const hasStructuralChange = hasLengthChange || hasIndexChange;\n      const hasResultChange = hasStructuralChange ? true : newResult.some((result, index) => {\n        const prev = _classPrivateFieldGet(_result, this)[index];\n        return !prev || !shallowEqualObjects(result, prev);\n      });\n      if (!hasStructuralChange && !hasResultChange) return;\n      if (hasStructuralChange) {\n        _classPrivateFieldSet(_observerMatches, this, newObserverMatches);\n        _classPrivateFieldSet(_observers, this, newObservers);\n      }\n      _classPrivateFieldSet(_result, this, newResult);\n      if (!this.hasListeners()) return;\n      if (hasStructuralChange) {\n        difference(prevObservers, newObservers).forEach(observer => {\n          observer.destroy();\n        });\n        difference(newObservers, prevObservers).forEach(observer => {\n          observer.subscribe(result => {\n            _assertClassBrand(_Class_brand, this, _onUpdate).call(this, observer, result);\n          });\n        });\n      }\n      _assertClassBrand(_Class_brand, this, _notify).call(this);\n    });\n  }\n  getCurrentResult() {\n    return _classPrivateFieldGet(_result, this);\n  }\n  getQueries() {\n    return _classPrivateFieldGet(_observers, this).map(observer => observer.getCurrentQuery());\n  }\n  getObservers() {\n    return _classPrivateFieldGet(_observers, this);\n  }\n  getOptimisticResult(queries, combine) {\n    const matches = _assertClassBrand(_Class_brand, this, _findMatchingObservers).call(this, queries);\n    const result = matches.map(match => match.observer.getOptimisticResult(match.defaultedQueryOptions));\n    const queryHashes = matches.map(match => match.defaultedQueryOptions.queryHash);\n    return [result, r => {\n      return _assertClassBrand(_Class_brand, this, _combineResult).call(this, r !== null && r !== void 0 ? r : result, combine, queryHashes);\n    }, () => {\n      return _assertClassBrand(_Class_brand, this, _trackResult).call(this, result, matches);\n    }];\n  }\n});\nfunction _trackResult(result, matches) {\n  return matches.map((match, index) => {\n    const observerResult = result[index];\n    return !match.defaultedQueryOptions.notifyOnChangeProps ? match.observer.trackResult(observerResult, accessedProp => {\n      matches.forEach(m => {\n        m.observer.trackProp(accessedProp);\n      });\n    }) : observerResult;\n  });\n}\nfunction _combineResult(input, combine, queryHashes) {\n  if (combine) {\n    const lastHashes = _classPrivateFieldGet(_lastQueryHashes, this);\n    const queryHashesChanged = queryHashes !== void 0 && lastHashes !== void 0 && (lastHashes.length !== queryHashes.length || queryHashes.some((hash, i) => hash !== lastHashes[i]));\n    if (!_classPrivateFieldGet(_combinedResult, this) || _classPrivateFieldGet(_result, this) !== _classPrivateFieldGet(_lastResult, this) || queryHashesChanged || combine !== _classPrivateFieldGet(_lastCombine, this)) {\n      _classPrivateFieldSet(_lastCombine, this, combine);\n      _classPrivateFieldSet(_lastResult, this, _classPrivateFieldGet(_result, this));\n      if (queryHashes !== void 0) {\n        _classPrivateFieldSet(_lastQueryHashes, this, queryHashes);\n      }\n      _classPrivateFieldSet(_combinedResult, this, replaceEqualDeep(_classPrivateFieldGet(_combinedResult, this), combine(input)));\n    }\n    return _classPrivateFieldGet(_combinedResult, this);\n  }\n  return input;\n}\nfunction _findMatchingObservers(queries) {\n  const prevObserversMap = /* @__PURE__ */new Map();\n  _classPrivateFieldGet(_observers, this).forEach(observer => {\n    const key = observer.options.queryHash;\n    if (!key) return;\n    const previousObservers = prevObserversMap.get(key);\n    if (previousObservers) {\n      previousObservers.push(observer);\n    } else {\n      prevObserversMap.set(key, [observer]);\n    }\n  });\n  const observers = [];\n  queries.forEach(options => {\n    var _prevObserversMap$get;\n    const defaultedOptions = _classPrivateFieldGet(_client, this).defaultQueryOptions(options);\n    const match = (_prevObserversMap$get = prevObserversMap.get(defaultedOptions.queryHash)) === null || _prevObserversMap$get === void 0 ? void 0 : _prevObserversMap$get.shift();\n    const observer = match !== null && match !== void 0 ? match : new QueryObserver(_classPrivateFieldGet(_client, this), defaultedOptions);\n    observers.push({\n      defaultedQueryOptions: defaultedOptions,\n      observer\n    });\n  });\n  return observers;\n}\nfunction _onUpdate(observer, result) {\n  const index = _classPrivateFieldGet(_observers, this).indexOf(observer);\n  if (index !== -1) {\n    _classPrivateFieldSet(_result, this, replaceAt(_classPrivateFieldGet(_result, this), index, result));\n    _assertClassBrand(_Class_brand, this, _notify).call(this);\n  }\n}\nfunction _notify() {\n  if (this.hasListeners()) {\n    var _classPrivateFieldGet2;\n    const previousResult = _classPrivateFieldGet(_combinedResult, this);\n    const newTracked = _assertClassBrand(_Class_brand, this, _trackResult).call(this, _classPrivateFieldGet(_result, this), _classPrivateFieldGet(_observerMatches, this));\n    const newResult = _assertClassBrand(_Class_brand, this, _combineResult).call(this, newTracked, (_classPrivateFieldGet2 = _classPrivateFieldGet(_options, this)) === null || _classPrivateFieldGet2 === void 0 ? void 0 : _classPrivateFieldGet2.combine);\n    if (previousResult !== newResult) {\n      notifyManager.batch(() => {\n        this.listeners.forEach(listener => {\n          listener(_classPrivateFieldGet(_result, this));\n        });\n      });\n    }\n  }\n}\nexport { QueriesObserver };","map":{"version":3,"names":["notifyManager","QueryObserver","Subscribable","replaceEqualDeep","shallowEqualObjects","difference","array1","array2","excludeSet","Set","filter","x","has","replaceAt","array","index","value","copy","slice","QueriesObserver","_client","WeakMap","_result","_queries","_options","_observers","_combinedResult","_lastCombine","_lastResult","_lastQueryHashes","_observerMatches","_Class_brand","WeakSet","constructor","client","queries","options","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_classPrivateFieldSet","setQueries","onSubscribe","listeners","size","_classPrivateFieldGet","forEach","observer","subscribe","result","_assertClassBrand","_onUpdate","call","onUnsubscribe","destroy","process","env","NODE_ENV","queryHashes","map","query","defaultQueryOptions","queryHash","length","console","warn","batch","prevObservers","newObserverMatches","_findMatchingObservers","match","setOptions","defaultedQueryOptions","newObservers","newResult","getCurrentResult","hasLengthChange","hasIndexChange","some","hasStructuralChange","hasResultChange","prev","hasListeners","_notify","getQueries","getCurrentQuery","getObservers","getOptimisticResult","combine","matches","r","_combineResult","_trackResult","observerResult","notifyOnChangeProps","trackResult","accessedProp","m","trackProp","input","lastHashes","queryHashesChanged","hash","i","prevObserversMap","Map","key","previousObservers","get","push","set","observers","_prevObserversMap$get","defaultedOptions","shift","indexOf","_classPrivateFieldGet2","previousResult","newTracked","listener"],"sources":["/home/smitpatel316/projects/cross-border-tax/frontend/node_modules/@tanstack/query-core/src/queriesObserver.ts"],"sourcesContent":["import { notifyManager } from './notifyManager'\nimport { QueryObserver } from './queryObserver'\nimport { Subscribable } from './subscribable'\nimport { replaceEqualDeep, shallowEqualObjects } from './utils'\nimport type {\n  DefaultedQueryObserverOptions,\n  QueryObserverOptions,\n  QueryObserverResult,\n} from './types'\nimport type { QueryClient } from './queryClient'\n\nfunction difference<T>(array1: Array<T>, array2: Array<T>): Array<T> {\n  const excludeSet = new Set(array2)\n  return array1.filter((x) => !excludeSet.has(x))\n}\n\nfunction replaceAt<T>(array: Array<T>, index: number, value: T): Array<T> {\n  const copy = array.slice(0)\n  copy[index] = value\n  return copy\n}\n\ntype QueriesObserverListener = (result: Array<QueryObserverResult>) => void\n\ntype CombineFn<TCombinedResult> = (\n  result: Array<QueryObserverResult>,\n) => TCombinedResult\n\nexport interface QueriesObserverOptions<\n  TCombinedResult = Array<QueryObserverResult>,\n> {\n  combine?: CombineFn<TCombinedResult>\n}\n\nexport class QueriesObserver<\n  TCombinedResult = Array<QueryObserverResult>,\n> extends Subscribable<QueriesObserverListener> {\n  #client: QueryClient\n  #result!: Array<QueryObserverResult>\n  #queries: Array<QueryObserverOptions>\n  #options?: QueriesObserverOptions<TCombinedResult>\n  #observers: Array<QueryObserver>\n  #combinedResult?: TCombinedResult\n  #lastCombine?: CombineFn<TCombinedResult>\n  #lastResult?: Array<QueryObserverResult>\n  #lastQueryHashes?: Array<string>\n  #observerMatches: Array<QueryObserverMatch> = []\n\n  constructor(\n    client: QueryClient,\n    queries: Array<QueryObserverOptions<any, any, any, any, any>>,\n    options?: QueriesObserverOptions<TCombinedResult>,\n  ) {\n    super()\n\n    this.#client = client\n    this.#options = options\n    this.#queries = []\n    this.#observers = []\n    this.#result = []\n\n    this.setQueries(queries)\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.size === 1) {\n      this.#observers.forEach((observer) => {\n        observer.subscribe((result) => {\n          this.#onUpdate(observer, result)\n        })\n      })\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.size) {\n      this.destroy()\n    }\n  }\n\n  destroy(): void {\n    this.listeners = new Set()\n    this.#observers.forEach((observer) => {\n      observer.destroy()\n    })\n  }\n\n  setQueries(\n    queries: Array<QueryObserverOptions>,\n    options?: QueriesObserverOptions<TCombinedResult>,\n  ): void {\n    this.#queries = queries\n    this.#options = options\n\n    if (process.env.NODE_ENV !== 'production') {\n      const queryHashes = queries.map(\n        (query) => this.#client.defaultQueryOptions(query).queryHash,\n      )\n      if (new Set(queryHashes).size !== queryHashes.length) {\n        console.warn(\n          '[QueriesObserver]: Duplicate Queries found. This might result in unexpected behavior.',\n        )\n      }\n    }\n\n    notifyManager.batch(() => {\n      const prevObservers = this.#observers\n\n      const newObserverMatches = this.#findMatchingObservers(this.#queries)\n\n      // set options for the new observers to notify of changes\n      newObserverMatches.forEach((match) =>\n        match.observer.setOptions(match.defaultedQueryOptions),\n      )\n\n      const newObservers = newObserverMatches.map((match) => match.observer)\n      const newResult = newObservers.map((observer) =>\n        observer.getCurrentResult(),\n      )\n\n      const hasLengthChange = prevObservers.length !== newObservers.length\n      const hasIndexChange = newObservers.some(\n        (observer, index) => observer !== prevObservers[index],\n      )\n      const hasStructuralChange = hasLengthChange || hasIndexChange\n\n      const hasResultChange = hasStructuralChange\n        ? true\n        : newResult.some((result, index) => {\n            const prev = this.#result[index]\n            return !prev || !shallowEqualObjects(result, prev)\n          })\n\n      if (!hasStructuralChange && !hasResultChange) return\n\n      if (hasStructuralChange) {\n        this.#observerMatches = newObserverMatches\n        this.#observers = newObservers\n      }\n\n      this.#result = newResult\n\n      if (!this.hasListeners()) return\n\n      if (hasStructuralChange) {\n        difference(prevObservers, newObservers).forEach((observer) => {\n          observer.destroy()\n        })\n        difference(newObservers, prevObservers).forEach((observer) => {\n          observer.subscribe((result) => {\n            this.#onUpdate(observer, result)\n          })\n        })\n      }\n\n      this.#notify()\n    })\n  }\n\n  getCurrentResult(): Array<QueryObserverResult> {\n    return this.#result\n  }\n\n  getQueries() {\n    return this.#observers.map((observer) => observer.getCurrentQuery())\n  }\n\n  getObservers() {\n    return this.#observers\n  }\n\n  getOptimisticResult(\n    queries: Array<QueryObserverOptions>,\n    combine: CombineFn<TCombinedResult> | undefined,\n  ): [\n    rawResult: Array<QueryObserverResult>,\n    combineResult: (r?: Array<QueryObserverResult>) => TCombinedResult,\n    trackResult: () => Array<QueryObserverResult>,\n  ] {\n    const matches = this.#findMatchingObservers(queries)\n    const result = matches.map((match) =>\n      match.observer.getOptimisticResult(match.defaultedQueryOptions),\n    )\n    const queryHashes = matches.map(\n      (match) => match.defaultedQueryOptions.queryHash,\n    )\n\n    return [\n      result,\n      (r?: Array<QueryObserverResult>) => {\n        return this.#combineResult(r ?? result, combine, queryHashes)\n      },\n      () => {\n        return this.#trackResult(result, matches)\n      },\n    ]\n  }\n\n  #trackResult(\n    result: Array<QueryObserverResult>,\n    matches: Array<QueryObserverMatch>,\n  ) {\n    return matches.map((match, index) => {\n      const observerResult = result[index]!\n      return !match.defaultedQueryOptions.notifyOnChangeProps\n        ? match.observer.trackResult(observerResult, (accessedProp) => {\n            // track property on all observers to ensure proper (synchronized) tracking (#7000)\n            matches.forEach((m) => {\n              m.observer.trackProp(accessedProp)\n            })\n          })\n        : observerResult\n    })\n  }\n\n  #combineResult(\n    input: Array<QueryObserverResult>,\n    combine: CombineFn<TCombinedResult> | undefined,\n    queryHashes?: Array<string>,\n  ): TCombinedResult {\n    if (combine) {\n      const lastHashes = this.#lastQueryHashes\n      const queryHashesChanged =\n        queryHashes !== undefined &&\n        lastHashes !== undefined &&\n        (lastHashes.length !== queryHashes.length ||\n          queryHashes.some((hash, i) => hash !== lastHashes[i]))\n\n      if (\n        !this.#combinedResult ||\n        this.#result !== this.#lastResult ||\n        queryHashesChanged ||\n        combine !== this.#lastCombine\n      ) {\n        this.#lastCombine = combine\n        this.#lastResult = this.#result\n\n        if (queryHashes !== undefined) {\n          this.#lastQueryHashes = queryHashes\n        }\n        this.#combinedResult = replaceEqualDeep(\n          this.#combinedResult,\n          combine(input),\n        )\n      }\n\n      return this.#combinedResult\n    }\n    return input as any\n  }\n\n  #findMatchingObservers(\n    queries: Array<QueryObserverOptions>,\n  ): Array<QueryObserverMatch> {\n    const prevObserversMap = new Map<string, Array<QueryObserver>>()\n\n    this.#observers.forEach((observer) => {\n      const key = observer.options.queryHash\n      if (!key) return\n\n      const previousObservers = prevObserversMap.get(key)\n\n      if (previousObservers) {\n        previousObservers.push(observer)\n      } else {\n        prevObserversMap.set(key, [observer])\n      }\n    })\n\n    const observers: Array<QueryObserverMatch> = []\n\n    queries.forEach((options) => {\n      const defaultedOptions = this.#client.defaultQueryOptions(options)\n      const match = prevObserversMap.get(defaultedOptions.queryHash)?.shift()\n      const observer =\n        match ?? new QueryObserver(this.#client, defaultedOptions)\n\n      observers.push({\n        defaultedQueryOptions: defaultedOptions,\n        observer,\n      })\n    })\n\n    return observers\n  }\n\n  #onUpdate(observer: QueryObserver, result: QueryObserverResult): void {\n    const index = this.#observers.indexOf(observer)\n    if (index !== -1) {\n      this.#result = replaceAt(this.#result, index, result)\n      this.#notify()\n    }\n  }\n\n  #notify(): void {\n    if (this.hasListeners()) {\n      const previousResult = this.#combinedResult\n      const newTracked = this.#trackResult(this.#result, this.#observerMatches)\n      const newResult = this.#combineResult(newTracked, this.#options?.combine)\n\n      if (previousResult !== newResult) {\n        notifyManager.batch(() => {\n          this.listeners.forEach((listener) => {\n            listener(this.#result)\n          })\n        })\n      }\n    }\n  }\n}\n\ntype QueryObserverMatch = {\n  defaultedQueryOptions: DefaultedQueryObserverOptions\n  observer: QueryObserver\n}\n"],"mappings":";;;;;;;AAAA,SAASA,aAAA,QAAqB;AAC9B,SAASC,aAAA,QAAqB;AAC9B,SAASC,YAAA,QAAoB;AAC7B,SAASC,gBAAA,EAAkBC,mBAAA,QAA2B;AAQtD,SAASC,WAAcC,MAAA,EAAkBC,MAAA,EAA4B;EACnE,MAAMC,UAAA,GAAa,IAAIC,GAAA,CAAIF,MAAM;EACjC,OAAOD,MAAA,CAAOI,MAAA,CAAQC,CAAA,IAAM,CAACH,UAAA,CAAWI,GAAA,CAAID,CAAC,CAAC;AAChD;AAEA,SAASE,UAAaC,KAAA,EAAiBC,KAAA,EAAeC,KAAA,EAAoB;EACxE,MAAMC,IAAA,GAAOH,KAAA,CAAMI,KAAA,CAAM,CAAC;EAC1BD,IAAA,CAAKF,KAAK,IAAIC,KAAA;EACd,OAAOC,IAAA;AACT;AAcO,IAAME,eAAA,IAAAC,OAAA,oBAAAC,OAAA,IAAAC,OAAA,oBAAAD,OAAA,IAAAE,QAAA,oBAAAF,OAAA,IAAAG,QAAA,oBAAAH,OAAA,IAAAI,UAAA,oBAAAJ,OAAA,IAAAK,eAAA,oBAAAL,OAAA,IAAAM,YAAA,oBAAAN,OAAA,IAAAO,WAAA,oBAAAP,OAAA,IAAAQ,gBAAA,oBAAAR,OAAA,IAAAS,gBAAA,oBAAAT,OAAA,IAAAU,YAAA,oBAAAC,OAAA,IAAN,MAAMb,eAAA,SAEHjB,YAAA,CAAsC;EAY9C+B,YACEC,MAAA,EACAC,SAAA,EACAC,SAAA,EACA;IACA,MAAM;IAAAC,2BAAA,OAAAN,YAAA;IAhBRO,0BAAA,OAAAlB,OAAA;IACAkB,0BAAA,OAAAhB,OAAA;IACAgB,0BAAA,OAAAf,QAAA;IACAe,0BAAA,OAAAd,QAAA;IACAc,0BAAA,OAAAb,UAAA;IACAa,0BAAA,OAAAZ,eAAA;IACAY,0BAAA,OAAAX,YAAA;IACAW,0BAAA,OAAAV,WAAA;IACAU,0BAAA,OAAAT,gBAAA;IACAS,0BAAA,OAAAR,gBAAA,EAA8C,EAAC;IAS7CS,qBAAA,CAAKnB,OAAA,EAAL,MAAec,MAAV;IACLK,qBAAA,CAAKf,QAAA,EAAL,MAAgBY,SAAX;IACLG,qBAAA,CAAKhB,QAAA,EAAL,MAAgB,EAAX;IACLgB,qBAAA,CAAKd,UAAA,EAAL,MAAkB,EAAb;IACLc,qBAAA,CAAKjB,OAAA,EAAL,MAAe,EAAV;IAEL,KAAKkB,UAAA,CAAWL,SAAO;EACzB;EAEUM,YAAA,EAAoB;IAC5B,IAAI,KAAKC,SAAA,CAAUC,IAAA,KAAS,GAAG;MAC7BC,qBAAA,CAAKnB,UAAA,EAAL,IAAK,EAAWoB,OAAA,CAASC,QAAA,IAAa;QACpCA,QAAA,CAASC,SAAA,CAAWC,MAAA,IAAW;UAC7BC,iBAAA,CAAAlB,YAAA,QAAKmB,SAAA,EAAAC,IAAA,CAAL,MAAeL,QAAA,EAAUE,MAAM;QACjC,CAAC;MACH,CAAC;IACH;EACF;EAEUI,cAAA,EAAsB;IAC9B,IAAI,CAAC,KAAKV,SAAA,CAAUC,IAAA,EAAM;MACxB,KAAKU,OAAA,CAAQ;IACf;EACF;EAEAA,QAAA,EAAgB;IACd,KAAKX,SAAA,GAAY,mBAAIjC,GAAA,CAAI;IACzBmC,qBAAA,CAAKnB,UAAA,EAAL,IAAK,EAAWoB,OAAA,CAASC,QAAA,IAAa;MACpCA,QAAA,CAASO,OAAA,CAAQ;IACnB,CAAC;EACH;EAEAb,WACEL,OAAA,EACAC,OAAA,EACM;IACNG,qBAAA,CAAKhB,QAAA,EAAL,MAAgBY,OAAX;IACLI,qBAAA,CAAKf,QAAA,EAAL,MAAgBY,OAAX;IAEL,IAAIkB,OAAA,CAAQC,GAAA,CAAIC,QAAA,KAAa,cAAc;MACzC,MAAMC,WAAA,GAActB,OAAA,CAAQuB,GAAA,CACzBC,KAAA,IAAUf,qBAAA,CAAKxB,OAAA,EAAL,IAAK,EAAQwC,mBAAA,CAAoBD,KAAK,EAAEE,SACrD;MACA,IAAI,IAAIpD,GAAA,CAAIgD,WAAW,EAAEd,IAAA,KAASc,WAAA,CAAYK,MAAA,EAAQ;QACpDC,OAAA,CAAQC,IAAA,CACN,uFACF;MACF;IACF;IAEAhE,aAAA,CAAciE,KAAA,CAAM,MAAM;MACxB,MAAMC,aAAA,GAAgBtB,qBAAA,CAAKnB,UAAA,EAAL,IAAK;MAE3B,MAAM0C,kBAAA,GAAqBlB,iBAAA,CAAAlB,YAAA,QAAKqC,sBAAA,EAAAjB,IAAA,CAAL,MAA4BP,qBAAA,CAAKrB,QAAQ,EAAb,IAAK,CAAQ;MAGpE4C,kBAAA,CAAmBtB,OAAA,CAASwB,KAAA,IAC1BA,KAAA,CAAMvB,QAAA,CAASwB,UAAA,CAAWD,KAAA,CAAME,qBAAqB,CACvD;MAEA,MAAMC,YAAA,GAAeL,kBAAA,CAAmBT,GAAA,CAAKW,KAAA,IAAUA,KAAA,CAAMvB,QAAQ;MACrE,MAAM2B,SAAA,GAAYD,YAAA,CAAad,GAAA,CAAKZ,QAAA,IAClCA,QAAA,CAAS4B,gBAAA,CAAiB,CAC5B;MAEA,MAAMC,eAAA,GAAkBT,aAAA,CAAcJ,MAAA,KAAWU,YAAA,CAAaV,MAAA;MAC9D,MAAMc,cAAA,GAAiBJ,YAAA,CAAaK,IAAA,CAClC,CAAC/B,QAAA,EAAU/B,KAAA,KAAU+B,QAAA,KAAaoB,aAAA,CAAcnD,KAAK,CACvD;MACA,MAAM+D,mBAAA,GAAsBH,eAAA,IAAmBC,cAAA;MAE/C,MAAMG,eAAA,GAAkBD,mBAAA,GACpB,OACAL,SAAA,CAAUI,IAAA,CAAK,CAAC7B,MAAA,EAAQjC,KAAA,KAAU;QAChC,MAAMiE,IAAA,GAAOpC,qBAAA,CAAKtB,OAAA,EAAL,IAAK,EAAQP,KAAK;QAC/B,OAAO,CAACiE,IAAA,IAAQ,CAAC5E,mBAAA,CAAoB4C,MAAA,EAAQgC,IAAI;MACnD,CAAC;MAEL,IAAI,CAACF,mBAAA,IAAuB,CAACC,eAAA,EAAiB;MAE9C,IAAID,mBAAA,EAAqB;QACvBvC,qBAAA,CAAKT,gBAAA,EAAL,MAAwBqC,kBAAnB;QACL5B,qBAAA,CAAKd,UAAA,EAAL,MAAkB+C,YAAb;MACP;MAEAjC,qBAAA,CAAKjB,OAAA,EAAL,MAAemD,SAAV;MAEL,IAAI,CAAC,KAAKQ,YAAA,CAAa,GAAG;MAE1B,IAAIH,mBAAA,EAAqB;QACvBzE,UAAA,CAAW6D,aAAA,EAAeM,YAAY,EAAE3B,OAAA,CAASC,QAAA,IAAa;UAC5DA,QAAA,CAASO,OAAA,CAAQ;QACnB,CAAC;QACDhD,UAAA,CAAWmE,YAAA,EAAcN,aAAa,EAAErB,OAAA,CAASC,QAAA,IAAa;UAC5DA,QAAA,CAASC,SAAA,CAAWC,MAAA,IAAW;YAC7BC,iBAAA,CAAAlB,YAAA,QAAKmB,SAAA,EAAAC,IAAA,CAAL,MAAeL,QAAA,EAAUE,MAAM;UACjC,CAAC;QACH,CAAC;MACH;MAEAC,iBAAA,CAAAlB,YAAA,QAAKmD,OAAA,EAAA/B,IAAA,CAAL;IACF,CAAC;EACH;EAEAuB,iBAAA,EAA+C;IAC7C,OAAO9B,qBAAA,CAAKtB,OAAA,EAAL,IAAK;EACd;EAEA6D,WAAA,EAAa;IACX,OAAOvC,qBAAA,CAAKnB,UAAA,EAAL,IAAK,EAAWiC,GAAA,CAAKZ,QAAA,IAAaA,QAAA,CAASsC,eAAA,CAAgB,CAAC;EACrE;EAEAC,aAAA,EAAe;IACb,OAAOzC,qBAAA,CAAKnB,UAAA,EAAL,IAAK;EACd;EAEA6D,oBACEnD,OAAA,EACAoD,OAAA,EAKA;IACA,MAAMC,OAAA,GAAUvC,iBAAA,CAAAlB,YAAA,QAAKqC,sBAAA,EAAAjB,IAAA,CAAL,MAA4BhB,OAAO;IACnD,MAAMa,MAAA,GAASwC,OAAA,CAAQ9B,GAAA,CAAKW,KAAA,IAC1BA,KAAA,CAAMvB,QAAA,CAASwC,mBAAA,CAAoBjB,KAAA,CAAME,qBAAqB,CAChE;IACA,MAAMd,WAAA,GAAc+B,OAAA,CAAQ9B,GAAA,CACzBW,KAAA,IAAUA,KAAA,CAAME,qBAAA,CAAsBV,SACzC;IAEA,OAAO,CACLb,MAAA,EACCyC,CAAA,IAAmC;MAClC,OAAOxC,iBAAA,CAAAlB,YAAA,QAAK2D,cAAA,EAAAvC,IAAA,CAAL,MAAoBsC,CAAA,aAAAA,CAAA,cAAAA,CAAA,GAAKzC,MAAA,EAAQuC,OAAA,EAAS9B,WAAW;IAC9D,GACA,MAAM;MACJ,OAAOR,iBAAA,CAAAlB,YAAA,QAAK4D,YAAA,EAAAxC,IAAA,CAAL,MAAkBH,MAAA,EAAQwC,OAAO;IAC1C,EACF;EACF;AAiHF;AAAA,SAAAG,aA9GI3C,MAAA,EACAwC,OAAA,EACA;EACA,OAAOA,OAAA,CAAQ9B,GAAA,CAAI,CAACW,KAAA,EAAOtD,KAAA,KAAU;IACnC,MAAM6E,cAAA,GAAiB5C,MAAA,CAAOjC,KAAK;IACnC,OAAO,CAACsD,KAAA,CAAME,qBAAA,CAAsBsB,mBAAA,GAChCxB,KAAA,CAAMvB,QAAA,CAASgD,WAAA,CAAYF,cAAA,EAAiBG,YAAA,IAAiB;MAE3DP,OAAA,CAAQ3C,OAAA,CAASmD,CAAA,IAAM;QACrBA,CAAA,CAAElD,QAAA,CAASmD,SAAA,CAAUF,YAAY;MACnC,CAAC;IACH,CAAC,IACDH,cAAA;EACN,CAAC;AACH;AAAA,SAAAF,eAGEQ,KAAA,EACAX,OAAA,EACA9B,WAAA,EACiB;EACjB,IAAI8B,OAAA,EAAS;IACX,MAAMY,UAAA,GAAavD,qBAAA,CAAKf,gBAAA,EAAL,IAAK;IACxB,MAAMuE,kBAAA,GACJ3C,WAAA,KAAgB,UAChB0C,UAAA,KAAe,WACdA,UAAA,CAAWrC,MAAA,KAAWL,WAAA,CAAYK,MAAA,IACjCL,WAAA,CAAYoB,IAAA,CAAK,CAACwB,IAAA,EAAMC,CAAA,KAAMD,IAAA,KAASF,UAAA,CAAWG,CAAC,CAAC;IAExD,IACE,CAAC1D,qBAAA,CAAKlB,eAAA,EAAL,IAAK,KACNkB,qBAAA,CAAKtB,OAAA,EAAL,IAAK,MAAYsB,qBAAA,CAAKhB,WAAA,EAAL,IAAK,KACtBwE,kBAAA,IACAb,OAAA,KAAY3C,qBAAA,CAAKjB,YAAA,EAAL,IAAK,GACjB;MACAY,qBAAA,CAAKZ,YAAA,EAAL,MAAoB4D,OAAf;MACLhD,qBAAA,CAAKX,WAAA,EAAL,MAAmBgB,qBAAA,CAAKtB,OAAA,EAAL,IAAK,CAAnB;MAEL,IAAImC,WAAA,KAAgB,QAAW;QAC7BlB,qBAAA,CAAKV,gBAAA,EAAL,MAAwB4B,WAAnB;MACP;MACAlB,qBAAA,CAAKb,eAAA,EAAL,MAAuBvB,gBAAA,CACrByC,qBAAA,CAAKlB,eAAA,EAAL,IAAK,GACL6D,OAAA,CAAQW,KAAK,CACf,CAHK;IAIP;IAEA,OAAOtD,qBAAA,CAAKlB,eAAA,EAAL,IAAK;EACd;EACA,OAAOwE,KAAA;AACT;AAAA,SAAA9B,uBAGEjC,OAAA,EAC2B;EAC3B,MAAMoE,gBAAA,GAAmB,mBAAIC,GAAA,CAAkC;EAE/D5D,qBAAA,CAAKnB,UAAA,EAAL,IAAK,EAAWoB,OAAA,CAASC,QAAA,IAAa;IACpC,MAAM2D,GAAA,GAAM3D,QAAA,CAASV,OAAA,CAAQyB,SAAA;IAC7B,IAAI,CAAC4C,GAAA,EAAK;IAEV,MAAMC,iBAAA,GAAoBH,gBAAA,CAAiBI,GAAA,CAAIF,GAAG;IAElD,IAAIC,iBAAA,EAAmB;MACrBA,iBAAA,CAAkBE,IAAA,CAAK9D,QAAQ;IACjC,OAAO;MACLyD,gBAAA,CAAiBM,GAAA,CAAIJ,GAAA,EAAK,CAAC3D,QAAQ,CAAC;IACtC;EACF,CAAC;EAED,MAAMgE,SAAA,GAAuC,EAAC;EAE9C3E,OAAA,CAAQU,OAAA,CAAST,OAAA,IAAY;IAAA,IAAA2E,qBAAA;IAC3B,MAAMC,gBAAA,GAAmBpE,qBAAA,CAAKxB,OAAA,EAAL,IAAK,EAAQwC,mBAAA,CAAoBxB,OAAO;IACjE,MAAMiC,KAAA,IAAA0C,qBAAA,GAAQR,gBAAA,CAAiBI,GAAA,CAAIK,gBAAA,CAAiBnD,SAAS,eAAAkD,qBAAA,uBAA/CA,qBAAA,CAAkDE,KAAA,CAAM;IACtE,MAAMnE,QAAA,GACJuB,KAAA,aAAAA,KAAA,cAAAA,KAAA,GAAS,IAAIpE,aAAA,CAAc2C,qBAAA,CAAKxB,OAAA,EAAL,IAAK,GAAS4F,gBAAgB;IAE3DF,SAAA,CAAUF,IAAA,CAAK;MACbrC,qBAAA,EAAuByC,gBAAA;MACvBlE;IACF,CAAC;EACH,CAAC;EAED,OAAOgE,SAAA;AACT;AAAA,SAAA5D,UAEUJ,QAAA,EAAyBE,MAAA,EAAmC;EACpE,MAAMjC,KAAA,GAAQ6B,qBAAA,CAAKnB,UAAA,EAAL,IAAK,EAAWyF,OAAA,CAAQpE,QAAQ;EAC9C,IAAI/B,KAAA,KAAU,IAAI;IAChBwB,qBAAA,CAAKjB,OAAA,EAAL,MAAeT,SAAA,CAAU+B,qBAAA,CAAKtB,OAAA,EAAL,IAAK,GAASP,KAAA,EAAOiC,MAAM,CAA/C;IACLC,iBAAA,CAAAlB,YAAA,QAAKmD,OAAA,EAAA/B,IAAA,CAAL;EACF;AACF;AAAA,SAAA+B,QAAA,EAEgB;EACd,IAAI,KAAKD,YAAA,CAAa,GAAG;IAAA,IAAAkC,sBAAA;IACvB,MAAMC,cAAA,GAAiBxE,qBAAA,CAAKlB,eAAA,EAAL,IAAK;IAC5B,MAAM2F,UAAA,GAAapE,iBAAA,CAAAlB,YAAA,QAAK4D,YAAA,EAAAxC,IAAA,CAAL,MAAkBP,qBAAA,CAAKtB,OAAA,EAAL,IAAK,GAASsB,qBAAA,CAAKd,gBAAgB,EAArB,IAAK,CAAgB;IACxE,MAAM2C,SAAA,GAAYxB,iBAAA,CAAAlB,YAAA,QAAK2D,cAAA,EAAAvC,IAAA,CAAL,MAAoBkE,UAAA,GAAAF,sBAAA,GAAYvE,qBAAA,CAAKpB,QAAA,EAAL,IAAK,eAAA2F,sBAAA,uBAALA,sBAAA,CAAe5B,OAAO;IAExE,IAAI6B,cAAA,KAAmB3C,SAAA,EAAW;MAChCzE,aAAA,CAAciE,KAAA,CAAM,MAAM;QACxB,KAAKvB,SAAA,CAAUG,OAAA,CAASyE,QAAA,IAAa;UACnCA,QAAA,CAAS1E,qBAAA,CAAKtB,OAAO,EAAZ,IAAK,CAAO;QACvB,CAAC;MACH,CAAC;IACH;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}